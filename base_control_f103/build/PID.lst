ARM GAS  /tmp/cc9QEZ4P.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"PID.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.global	__aeabi_ui2f
  16              		.global	__aeabi_fmul
  17              		.global	__aeabi_f2d
  18              		.global	__aeabi_ddiv
  19              		.global	__aeabi_dmul
  20              		.section	.text.PID_ComputeSpeedRPM,"ax",%progbits
  21              		.align	1
  22              		.global	PID_ComputeSpeedRPM
  23              		.arch armv7-m
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  27              		.fpu softvfp
  29              	PID_ComputeSpeedRPM:
  30              	.LVL0:
  31              	.LFB65:
  32              		.file 1 "Core/Src/PID.c"
   1:Core/Src/PID.c **** /*
   2:Core/Src/PID.c **** *   File name: PID.c
   3:Core/Src/PID.c **** *   Author: Linh Nguyen
   4:Core/Src/PID.c **** *   Last modified: 1/6/2021
   5:Core/Src/PID.c **** *   Description: This contains all interface functions for PID controlling motors
   6:Core/Src/PID.c **** */
   7:Core/Src/PID.c **** 
   8:Core/Src/PID.c **** #include "PID.h"
   9:Core/Src/PID.c **** #include "string.h"
  10:Core/Src/PID.c **** #include "math.h"
  11:Core/Src/PID.c **** #include "config.h"
  12:Core/Src/PID.c **** #include "gpio.h"
  13:Core/Src/PID.c **** #include "stm32f1xx_hal_def.h"
  14:Core/Src/PID.c **** 
  15:Core/Src/PID.c **** // volatile double i_term;
  16:Core/Src/PID.c **** // volatile double p_term;
  17:Core/Src/PID.c **** // volatile double d_term;
  18:Core/Src/PID.c **** 
  19:Core/Src/PID.c **** 
  20:Core/Src/PID.c **** #ifdef ENABLE_PID
  21:Core/Src/PID.c **** /* Private function prototypes*/
  22:Core/Src/PID.c **** 
  23:Core/Src/PID.c **** double PID_Limit(double input, double max, double min);
  24:Core/Src/PID.c **** 
  25:Core/Src/PID.c **** 
  26:Core/Src/PID.c **** 
ARM GAS  /tmp/cc9QEZ4P.s 			page 2


  27:Core/Src/PID.c **** 
  28:Core/Src/PID.c **** // Convert encoder pulses count to speed in RPM, tick in milisecond
  29:Core/Src/PID.c **** void PID_ComputeSpeedRPM(MOTOR_TypeDef *motor, uint32_t tick)
  30:Core/Src/PID.c **** { 
  33              		.loc 1 30 1 view -0
  34              		.cfi_startproc
  35              		@ args = 0, pretend = 0, frame = 0
  36              		@ frame_needed = 0, uses_anonymous_args = 0
  37              		.loc 1 30 1 is_stmt 0 view .LVU1
  38 0000 D0B5     		push	{r4, r6, r7, lr}
  39              	.LCFI0:
  40              		.cfi_def_cfa_offset 16
  41              		.cfi_offset 4, -16
  42              		.cfi_offset 6, -12
  43              		.cfi_offset 7, -8
  44              		.cfi_offset 14, -4
  45 0002 0446     		mov	r4, r0
  31:Core/Src/PID.c ****     motor->speed = ((motor->measure) / (MOTOR_PPR * tick))*60000;
  46              		.loc 1 31 5 is_stmt 1 view .LVU2
  47              		.loc 1 31 27 is_stmt 0 view .LVU3
  48 0004 D0E90467 		ldrd	r6, [r0, #16]
  49              		.loc 1 31 51 view .LVU4
  50 0008 0846     		mov	r0, r1
  51              	.LVL1:
  52              		.loc 1 31 51 view .LVU5
  53 000a FFF7FEFF 		bl	__aeabi_ui2f
  54              	.LVL2:
  55              		.loc 1 31 51 view .LVU6
  56 000e 0C49     		ldr	r1, .L3+8
  57 0010 FFF7FEFF 		bl	__aeabi_fmul
  58              	.LVL3:
  59 0014 FFF7FEFF 		bl	__aeabi_f2d
  60              	.LVL4:
  61 0018 0246     		mov	r2, r0
  62 001a 0B46     		mov	r3, r1
  63              		.loc 1 31 38 view .LVU7
  64 001c 3046     		mov	r0, r6
  65 001e 3946     		mov	r1, r7
  66 0020 FFF7FEFF 		bl	__aeabi_ddiv
  67              	.LVL5:
  68              		.loc 1 31 59 view .LVU8
  69 0024 04A3     		adr	r3, .L3
  70 0026 D3E90023 		ldrd	r2, [r3]
  71 002a FFF7FEFF 		bl	__aeabi_dmul
  72              	.LVL6:
  73              		.loc 1 31 18 view .LVU9
  74 002e C4E90001 		strd	r0, [r4]
  32:Core/Src/PID.c **** }
  75              		.loc 1 32 1 view .LVU10
  76 0032 D0BD     		pop	{r4, r6, r7, pc}
  77              	.LVL7:
  78              	.L4:
  79              		.loc 1 32 1 view .LVU11
  80 0034 AFF30080 		.align	3
  81              	.L3:
  82 0038 00000000 		.word	0
  83 003c 004CED40 		.word	1089293312
ARM GAS  /tmp/cc9QEZ4P.s 			page 3


  84 0040 00004844 		.word	1145569280
  85              		.cfi_endproc
  86              	.LFE65:
  88              		.global	__aeabi_dcmpge
  89              		.section	.text.PID_SetSpeedRPM,"ax",%progbits
  90              		.align	1
  91              		.global	PID_SetSpeedRPM
  92              		.syntax unified
  93              		.thumb
  94              		.thumb_func
  95              		.fpu softvfp
  97              	PID_SetSpeedRPM:
  98              	.LVL8:
  99              	.LFB66:
  33:Core/Src/PID.c **** 
  34:Core/Src/PID.c **** void PID_SetSpeedRPM(MOTOR_TypeDef *motor, double _set_speed)
  35:Core/Src/PID.c **** {
 100              		.loc 1 35 1 is_stmt 1 view -0
 101              		.cfi_startproc
 102              		@ args = 0, pretend = 0, frame = 0
 103              		@ frame_needed = 0, uses_anonymous_args = 0
 104              		.loc 1 35 1 is_stmt 0 view .LVU13
 105 0000 70B5     		push	{r4, r5, r6, lr}
 106              	.LCFI1:
 107              		.cfi_def_cfa_offset 16
 108              		.cfi_offset 4, -16
 109              		.cfi_offset 5, -12
 110              		.cfi_offset 6, -8
 111              		.cfi_offset 14, -4
 112 0002 0646     		mov	r6, r0
 113 0004 1446     		mov	r4, r2
 114 0006 1D46     		mov	r5, r3
  36:Core/Src/PID.c ****     if (_set_speed >= 0) 
 115              		.loc 1 36 5 is_stmt 1 view .LVU14
 116              		.loc 1 36 8 is_stmt 0 view .LVU15
 117 0008 0022     		movs	r2, #0
 118              	.LVL9:
 119              		.loc 1 36 8 view .LVU16
 120 000a 0023     		movs	r3, #0
 121 000c 2046     		mov	r0, r4
 122              	.LVL10:
 123              		.loc 1 36 8 view .LVU17
 124 000e 2946     		mov	r1, r5
 125 0010 FFF7FEFF 		bl	__aeabi_dcmpge
 126              	.LVL11:
 127 0014 28B1     		cbz	r0, .L10
  37:Core/Src/PID.c ****     {
  38:Core/Src/PID.c ****         motor->dir = 1;
 128              		.loc 1 38 9 is_stmt 1 view .LVU18
 129              		.loc 1 38 20 is_stmt 0 view .LVU19
 130 0016 0123     		movs	r3, #1
 131 0018 86F82830 		strb	r3, [r6, #40]
  39:Core/Src/PID.c ****         motor->set_speed = _set_speed;
 132              		.loc 1 39 9 is_stmt 1 view .LVU20
 133              		.loc 1 39 26 is_stmt 0 view .LVU21
 134 001c C6E90245 		strd	r4, [r6, #8]
 135              	.L5:
ARM GAS  /tmp/cc9QEZ4P.s 			page 4


  40:Core/Src/PID.c ****     } 
  41:Core/Src/PID.c ****     else 
  42:Core/Src/PID.c ****     {
  43:Core/Src/PID.c ****         motor->dir = 0;
  44:Core/Src/PID.c ****         motor->set_speed = - (_set_speed);
  45:Core/Src/PID.c ****     }    
  46:Core/Src/PID.c **** }
 136              		.loc 1 46 1 view .LVU22
 137 0020 70BD     		pop	{r4, r5, r6, pc}
 138              	.LVL12:
 139              	.L10:
  43:Core/Src/PID.c ****         motor->set_speed = - (_set_speed);
 140              		.loc 1 43 9 is_stmt 1 view .LVU23
  43:Core/Src/PID.c ****         motor->set_speed = - (_set_speed);
 141              		.loc 1 43 20 is_stmt 0 view .LVU24
 142 0022 0023     		movs	r3, #0
 143 0024 86F82830 		strb	r3, [r6, #40]
  44:Core/Src/PID.c ****     }    
 144              		.loc 1 44 9 is_stmt 1 view .LVU25
  44:Core/Src/PID.c ****     }    
 145              		.loc 1 44 28 is_stmt 0 view .LVU26
 146 0028 2246     		mov	r2, r4
 147 002a 05F10043 		add	r3, r5, #-2147483648
  44:Core/Src/PID.c ****     }    
 148              		.loc 1 44 26 view .LVU27
 149 002e C6E90223 		strd	r2, [r6, #8]
 150              		.loc 1 46 1 view .LVU28
 151 0032 F5E7     		b	.L5
 152              		.cfi_endproc
 153              	.LFE66:
 155              		.global	__aeabi_i2d
 156              		.section	.text.PID_SetSpeedMPS,"ax",%progbits
 157              		.align	1
 158              		.global	PID_SetSpeedMPS
 159              		.syntax unified
 160              		.thumb
 161              		.thumb_func
 162              		.fpu softvfp
 164              	PID_SetSpeedMPS:
 165              	.LVL13:
 166              	.LFB67:
  47:Core/Src/PID.c **** 
  48:Core/Src/PID.c **** // Convert speed in M/S to RPM and write to SET SPEED
  49:Core/Src/PID.c **** void PID_SetSpeedMPS(MOTOR_TypeDef *motor, int16_t _set_speed_mps)
  50:Core/Src/PID.c **** {
 167              		.loc 1 50 1 is_stmt 1 view -0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              		.loc 1 50 1 is_stmt 0 view .LVU30
 172 0000 10B5     		push	{r4, lr}
 173              	.LCFI2:
 174              		.cfi_def_cfa_offset 8
 175              		.cfi_offset 4, -8
 176              		.cfi_offset 14, -4
 177 0002 0446     		mov	r4, r0
  51:Core/Src/PID.c ****     double speed_rps = _set_speed_mps / (PI * ROBOT_WHEEL_DIAMETER);
ARM GAS  /tmp/cc9QEZ4P.s 			page 5


 178              		.loc 1 51 5 is_stmt 1 view .LVU31
 179              		.loc 1 51 39 is_stmt 0 view .LVU32
 180 0004 0846     		mov	r0, r1
 181              	.LVL14:
 182              		.loc 1 51 39 view .LVU33
 183 0006 FFF7FEFF 		bl	__aeabi_i2d
 184              	.LVL15:
 185              		.loc 1 51 12 view .LVU34
 186 000a 07A3     		adr	r3, .L14
 187 000c D3E90023 		ldrd	r2, [r3]
 188 0010 FFF7FEFF 		bl	__aeabi_ddiv
 189              	.LVL16:
  52:Core/Src/PID.c ****     motor->set_speed = (double)(speed_rps) * 60;
 190              		.loc 1 52 5 is_stmt 1 view .LVU35
 191              		.loc 1 52 44 is_stmt 0 view .LVU36
 192 0014 0022     		movs	r2, #0
 193 0016 064B     		ldr	r3, .L14+8
 194 0018 FFF7FEFF 		bl	__aeabi_dmul
 195              	.LVL17:
 196              		.loc 1 52 22 view .LVU37
 197 001c C4E90201 		strd	r0, [r4, #8]
  53:Core/Src/PID.c **** }
 198              		.loc 1 53 1 view .LVU38
 199 0020 10BD     		pop	{r4, pc}
 200              	.LVL18:
 201              	.L15:
 202              		.loc 1 53 1 view .LVU39
 203 0022 00BFAFF3 		.align	3
 203      0080
 204              	.L14:
 205 0028 DCE14F3D 		.word	1028645340
 206 002c 5723CA3F 		.word	1070211927
 207 0030 00004E40 		.word	1078853632
 208              		.cfi_endproc
 209              	.LFE67:
 211              		.global	__aeabi_dsub
 212              		.section	.text.PID_ComputeError,"ax",%progbits
 213              		.align	1
 214              		.global	PID_ComputeError
 215              		.syntax unified
 216              		.thumb
 217              		.thumb_func
 218              		.fpu softvfp
 220              	PID_ComputeError:
 221              	.LVL19:
 222              	.LFB68:
  54:Core/Src/PID.c **** 
  55:Core/Src/PID.c **** /*
  56:Core/Src/PID.c **** *  Note:
  57:Core/Src/PID.c **** */
  58:Core/Src/PID.c **** void PID_ComputeError(MOTOR_TypeDef *motor)
  59:Core/Src/PID.c **** {
 223              		.loc 1 59 1 is_stmt 1 view -0
 224              		.cfi_startproc
 225              		@ args = 0, pretend = 0, frame = 0
 226              		@ frame_needed = 0, uses_anonymous_args = 0
 227              		.loc 1 59 1 is_stmt 0 view .LVU41
ARM GAS  /tmp/cc9QEZ4P.s 			page 6


 228 0000 10B5     		push	{r4, lr}
 229              	.LCFI3:
 230              		.cfi_def_cfa_offset 8
 231              		.cfi_offset 4, -8
 232              		.cfi_offset 14, -4
 233 0002 0346     		mov	r3, r0
  60:Core/Src/PID.c ****     motor->pPID_params->error = (motor->set_speed) - (motor->speed);
 234              		.loc 1 60 5 is_stmt 1 view .LVU42
 235              		.loc 1 60 39 is_stmt 0 view .LVU43
 236 0004 00F10801 		add	r1, r0, #8
 237 0008 D1E90001 		ldrd	r0, [r1]
 238              	.LVL20:
 239              		.loc 1 60 10 view .LVU44
 240 000c 1C6B     		ldr	r4, [r3, #48]
 241              		.loc 1 60 52 view .LVU45
 242 000e D3E90023 		ldrd	r2, [r3]
 243 0012 FFF7FEFF 		bl	__aeabi_dsub
 244              	.LVL21:
 245              		.loc 1 60 31 view .LVU46
 246 0016 C4E90601 		strd	r0, [r4, #24]
  61:Core/Src/PID.c **** }
 247              		.loc 1 61 1 view .LVU47
 248 001a 10BD     		pop	{r4, pc}
 249              		.cfi_endproc
 250              	.LFE68:
 252              		.global	__aeabi_dcmpgt
 253              		.global	__aeabi_dcmplt
 254              		.section	.text.PID_Limit,"ax",%progbits
 255              		.align	1
 256              		.global	PID_Limit
 257              		.syntax unified
 258              		.thumb
 259              		.thumb_func
 260              		.fpu softvfp
 262              	PID_Limit:
 263              	.LVL22:
 264              	.LFB70:
  62:Core/Src/PID.c **** 
  63:Core/Src/PID.c **** /*
  64:Core/Src/PID.c **** *  Note: 
  65:Core/Src/PID.c **** */
  66:Core/Src/PID.c **** void PID_ComputeOutput(MOTOR_TypeDef *motor)
  67:Core/Src/PID.c **** {   
  68:Core/Src/PID.c ****     double i_term;
  69:Core/Src/PID.c ****     double p_term;
  70:Core/Src/PID.c **** 
  71:Core/Src/PID.c ****     double output = 0.0f;
  72:Core/Src/PID.c ****     double _OUTPUT_MAX = motor->pPID_params->OUTPUT_MAX;
  73:Core/Src/PID.c ****     double _OUTPUT_MIN =motor->pPID_params->OUTPUT_MIN;
  74:Core/Src/PID.c **** 
  75:Core/Src/PID.c ****     PID_TypeDef *PID ;
  76:Core/Src/PID.c ****     PID = motor->pPID_params;
  77:Core/Src/PID.c **** 
  78:Core/Src/PID.c ****     p_term = PID->Kp*(PID->error);
  79:Core/Src/PID.c **** 
  80:Core/Src/PID.c ****     // Compute upper limit of Integration Term 
  81:Core/Src/PID.c ****     float i_term_max, i_term_min;
ARM GAS  /tmp/cc9QEZ4P.s 			page 7


  82:Core/Src/PID.c ****     if (PID->OUTPUT_MAX > p_term)
  83:Core/Src/PID.c ****     {
  84:Core/Src/PID.c ****         i_term_max = PID->OUTPUT_MAX - p_term;
  85:Core/Src/PID.c ****     } 
  86:Core/Src/PID.c ****     else 
  87:Core/Src/PID.c ****     {
  88:Core/Src/PID.c ****         i_term_max = 0.0f;
  89:Core/Src/PID.c ****     }
  90:Core/Src/PID.c ****     // Compute lower limit of Integration Term
  91:Core/Src/PID.c ****     if (PID->OUTPUT_MIN < p_term)
  92:Core/Src/PID.c ****     {
  93:Core/Src/PID.c ****         i_term_min = PID->OUTPUT_MIN - p_term ;
  94:Core/Src/PID.c ****     } 
  95:Core/Src/PID.c ****     else 
  96:Core/Src/PID.c ****     {
  97:Core/Src/PID.c ****         i_term_min = 0.0f;
  98:Core/Src/PID.c ****     }
  99:Core/Src/PID.c **** 
 100:Core/Src/PID.c ****     i_term = PID->last_i +  PID->Ki * ( (PID->error) + (PID->previous_error) );
 101:Core/Src/PID.c ****     i_term = PID_Limit(i_term, i_term_max, i_term_min);
 102:Core/Src/PID.c ****     
 103:Core/Src/PID.c ****     output = p_term + i_term;
 104:Core/Src/PID.c ****     output = PID_Limit(output, _OUTPUT_MAX, _OUTPUT_MIN);
 105:Core/Src/PID.c ****     
 106:Core/Src/PID.c ****     motor->pwm_output = (output < 0) ? -output : output;
 107:Core/Src/PID.c ****     PID->previous_error = PID->error;
 108:Core/Src/PID.c ****     PID->last_i = i_term;
 109:Core/Src/PID.c **** }
 110:Core/Src/PID.c **** 
 111:Core/Src/PID.c **** // Limit the signal in range (max,min)
 112:Core/Src/PID.c **** double PID_Limit(double input, double max, double min)
 113:Core/Src/PID.c **** {
 265              		.loc 1 113 1 is_stmt 1 view -0
 266              		.cfi_startproc
 267              		@ args = 8, pretend = 0, frame = 0
 268              		@ frame_needed = 0, uses_anonymous_args = 0
 269              		.loc 1 113 1 is_stmt 0 view .LVU49
 270 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 271              	.LCFI4:
 272              		.cfi_def_cfa_offset 24
 273              		.cfi_offset 3, -24
 274              		.cfi_offset 4, -20
 275              		.cfi_offset 5, -16
 276              		.cfi_offset 6, -12
 277              		.cfi_offset 7, -8
 278              		.cfi_offset 14, -4
 279 0002 0646     		mov	r6, r0
 280 0004 0F46     		mov	r7, r1
 281 0006 1446     		mov	r4, r2
 282 0008 1D46     		mov	r5, r3
 114:Core/Src/PID.c ****     if (input > max)
 283              		.loc 1 114 5 is_stmt 1 view .LVU50
 284              		.loc 1 114 8 is_stmt 0 view .LVU51
 285 000a FFF7FEFF 		bl	__aeabi_dcmpgt
 286              	.LVL23:
 287              		.loc 1 114 8 view .LVU52
 288 000e 48B9     		cbnz	r0, .L21
ARM GAS  /tmp/cc9QEZ4P.s 			page 8


 115:Core/Src/PID.c ****     {
 116:Core/Src/PID.c ****         return max;
 117:Core/Src/PID.c ****     }
 118:Core/Src/PID.c ****     else if (input < min)
 289              		.loc 1 118 10 is_stmt 1 view .LVU53
 290              		.loc 1 118 13 is_stmt 0 view .LVU54
 291 0010 DDE90623 		ldrd	r2, [sp, #24]
 292 0014 3046     		mov	r0, r6
 293 0016 3946     		mov	r1, r7
 294 0018 FFF7FEFF 		bl	__aeabi_dcmplt
 295              	.LVL24:
 296 001c 28B1     		cbz	r0, .L24
 119:Core/Src/PID.c ****     {
 120:Core/Src/PID.c ****         return min;
 297              		.loc 1 120 16 view .LVU55
 298 001e DDE90601 		ldrd	r0, [sp, #24]
 299 0022 01E0     		b	.L18
 300              	.L21:
 116:Core/Src/PID.c ****     }
 301              		.loc 1 116 16 view .LVU56
 302 0024 2046     		mov	r0, r4
 303 0026 2946     		mov	r1, r5
 304              	.L18:
 121:Core/Src/PID.c ****     }
 122:Core/Src/PID.c ****     else
 123:Core/Src/PID.c ****     {
 124:Core/Src/PID.c ****         return input;
 125:Core/Src/PID.c ****     }
 126:Core/Src/PID.c **** }
 305              		.loc 1 126 1 view .LVU57
 306 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 307              	.LVL25:
 308              	.L24:
 124:Core/Src/PID.c ****     }
 309              		.loc 1 124 16 view .LVU58
 310 002a 3046     		mov	r0, r6
 311 002c 3946     		mov	r1, r7
 312 002e FBE7     		b	.L18
 313              		.cfi_endproc
 314              	.LFE70:
 316              		.global	__aeabi_d2f
 317              		.global	__aeabi_dadd
 318              		.section	.text.PID_ComputeOutput,"ax",%progbits
 319              		.align	1
 320              		.global	PID_ComputeOutput
 321              		.syntax unified
 322              		.thumb
 323              		.thumb_func
 324              		.fpu softvfp
 326              	PID_ComputeOutput:
 327              	.LVL26:
 328              	.LFB69:
  67:Core/Src/PID.c ****     double i_term;
 329              		.loc 1 67 1 is_stmt 1 view -0
 330              		.cfi_startproc
 331              		@ args = 0, pretend = 0, frame = 24
 332              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/cc9QEZ4P.s 			page 9


  67:Core/Src/PID.c ****     double i_term;
 333              		.loc 1 67 1 is_stmt 0 view .LVU60
 334 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 335              	.LCFI5:
 336              		.cfi_def_cfa_offset 36
 337              		.cfi_offset 4, -36
 338              		.cfi_offset 5, -32
 339              		.cfi_offset 6, -28
 340              		.cfi_offset 7, -24
 341              		.cfi_offset 8, -20
 342              		.cfi_offset 9, -16
 343              		.cfi_offset 10, -12
 344              		.cfi_offset 11, -8
 345              		.cfi_offset 14, -4
 346 0004 89B0     		sub	sp, sp, #36
 347              	.LCFI6:
 348              		.cfi_def_cfa_offset 72
 349 0006 0546     		mov	r5, r0
  68:Core/Src/PID.c ****     double p_term;
 350              		.loc 1 68 5 is_stmt 1 view .LVU61
  69:Core/Src/PID.c **** 
 351              		.loc 1 69 5 view .LVU62
  71:Core/Src/PID.c ****     double _OUTPUT_MAX = motor->pPID_params->OUTPUT_MAX;
 352              		.loc 1 71 5 view .LVU63
 353              	.LVL27:
  72:Core/Src/PID.c ****     double _OUTPUT_MIN =motor->pPID_params->OUTPUT_MIN;
 354              		.loc 1 72 5 view .LVU64
  72:Core/Src/PID.c ****     double _OUTPUT_MIN =motor->pPID_params->OUTPUT_MIN;
 355              		.loc 1 72 31 is_stmt 0 view .LVU65
 356 0008 046B     		ldr	r4, [r0, #48]
  72:Core/Src/PID.c ****     double _OUTPUT_MIN =motor->pPID_params->OUTPUT_MIN;
 357              		.loc 1 72 12 view .LVU66
 358 000a D4E91067 		ldrd	r6, [r4, #64]
 359 000e CDE90667 		strd	r6, [sp, #24]
 360              	.LVL28:
  73:Core/Src/PID.c **** 
 361              		.loc 1 73 5 is_stmt 1 view .LVU67
  73:Core/Src/PID.c **** 
 362              		.loc 1 73 12 is_stmt 0 view .LVU68
 363 0012 D4E91289 		ldrd	r8, [r4, #72]
 364              	.LVL29:
  75:Core/Src/PID.c ****     PID = motor->pPID_params;
 365              		.loc 1 75 5 is_stmt 1 view .LVU69
  76:Core/Src/PID.c **** 
 366              		.loc 1 76 5 view .LVU70
  78:Core/Src/PID.c **** 
 367              		.loc 1 78 5 view .LVU71
  78:Core/Src/PID.c **** 
 368              		.loc 1 78 12 is_stmt 0 view .LVU72
 369 0016 D4E90623 		ldrd	r2, [r4, #24]
 370 001a D4E90001 		ldrd	r0, [r4]
 371              	.LVL30:
  78:Core/Src/PID.c **** 
 372              		.loc 1 78 12 view .LVU73
 373 001e FFF7FEFF 		bl	__aeabi_dmul
 374              	.LVL31:
 375 0022 8246     		mov	r10, r0
ARM GAS  /tmp/cc9QEZ4P.s 			page 10


 376 0024 8B46     		mov	fp, r1
 377              	.LVL32:
  81:Core/Src/PID.c ****     if (PID->OUTPUT_MAX > p_term)
 378              		.loc 1 81 5 is_stmt 1 view .LVU74
  82:Core/Src/PID.c ****     {
 379              		.loc 1 82 5 view .LVU75
  82:Core/Src/PID.c ****     {
 380              		.loc 1 82 8 is_stmt 0 view .LVU76
 381 0026 0246     		mov	r2, r0
 382 0028 0B46     		mov	r3, r1
 383 002a 3046     		mov	r0, r6
 384 002c 3946     		mov	r1, r7
 385 002e FFF7FEFF 		bl	__aeabi_dcmpgt
 386              	.LVL33:
 387 0032 0028     		cmp	r0, #0
 388 0034 67D0     		beq	.L38
  84:Core/Src/PID.c ****     } 
 389              		.loc 1 84 9 is_stmt 1 view .LVU77
  84:Core/Src/PID.c ****     } 
 390              		.loc 1 84 38 is_stmt 0 view .LVU78
 391 0036 5246     		mov	r2, r10
 392 0038 5B46     		mov	r3, fp
 393 003a 3046     		mov	r0, r6
 394 003c 3946     		mov	r1, r7
 395 003e FFF7FEFF 		bl	__aeabi_dsub
 396              	.LVL34:
  84:Core/Src/PID.c ****     } 
 397              		.loc 1 84 20 view .LVU79
 398 0042 FFF7FEFF 		bl	__aeabi_d2f
 399              	.LVL35:
 400 0046 0490     		str	r0, [sp, #16]	@ float
 401              	.LVL36:
 402              	.L27:
  91:Core/Src/PID.c ****     {
 403              		.loc 1 91 5 is_stmt 1 view .LVU80
  91:Core/Src/PID.c ****     {
 404              		.loc 1 91 8 is_stmt 0 view .LVU81
 405 0048 5246     		mov	r2, r10
 406 004a 5B46     		mov	r3, fp
 407 004c 4046     		mov	r0, r8
 408 004e 4946     		mov	r1, r9
 409 0050 FFF7FEFF 		bl	__aeabi_dcmplt
 410              	.LVL37:
 411 0054 0028     		cmp	r0, #0
 412 0056 59D0     		beq	.L39
  93:Core/Src/PID.c ****     } 
 413              		.loc 1 93 9 is_stmt 1 view .LVU82
  93:Core/Src/PID.c ****     } 
 414              		.loc 1 93 38 is_stmt 0 view .LVU83
 415 0058 5246     		mov	r2, r10
 416 005a 5B46     		mov	r3, fp
 417 005c 4046     		mov	r0, r8
 418 005e 4946     		mov	r1, r9
 419 0060 FFF7FEFF 		bl	__aeabi_dsub
 420              	.LVL38:
  93:Core/Src/PID.c ****     } 
 421              		.loc 1 93 20 view .LVU84
ARM GAS  /tmp/cc9QEZ4P.s 			page 11


 422 0064 FFF7FEFF 		bl	__aeabi_d2f
 423              	.LVL39:
 424 0068 0590     		str	r0, [sp, #20]	@ float
 425              	.LVL40:
 426              	.L29:
 100:Core/Src/PID.c ****     i_term = PID_Limit(i_term, i_term_max, i_term_min);
 427              		.loc 1 100 5 is_stmt 1 view .LVU85
 100:Core/Src/PID.c ****     i_term = PID_Limit(i_term, i_term_max, i_term_min);
 428              		.loc 1 100 17 is_stmt 0 view .LVU86
 429 006a D4E90C23 		ldrd	r2, [r4, #48]
 430 006e CDE90223 		strd	r2, [sp, #8]
 100:Core/Src/PID.c ****     i_term = PID_Limit(i_term, i_term_max, i_term_min);
 431              		.loc 1 100 32 view .LVU87
 432 0072 D4E90467 		ldrd	r6, [r4, #16]
 433              	.LVL41:
 100:Core/Src/PID.c ****     i_term = PID_Limit(i_term, i_term_max, i_term_min);
 434              		.loc 1 100 45 view .LVU88
 435 0076 D4E90601 		ldrd	r0, [r4, #24]
 100:Core/Src/PID.c ****     i_term = PID_Limit(i_term, i_term_max, i_term_min);
 436              		.loc 1 100 54 view .LVU89
 437 007a D4E90823 		ldrd	r2, [r4, #32]
 438 007e FFF7FEFF 		bl	__aeabi_dadd
 439              	.LVL42:
 440 0082 0246     		mov	r2, r0
 441 0084 0B46     		mov	r3, r1
 100:Core/Src/PID.c ****     i_term = PID_Limit(i_term, i_term_max, i_term_min);
 442              		.loc 1 100 37 view .LVU90
 443 0086 3046     		mov	r0, r6
 444 0088 3946     		mov	r1, r7
 445 008a FFF7FEFF 		bl	__aeabi_dmul
 446              	.LVL43:
 447 008e 0246     		mov	r2, r0
 448 0090 0B46     		mov	r3, r1
 100:Core/Src/PID.c ****     i_term = PID_Limit(i_term, i_term_max, i_term_min);
 449              		.loc 1 100 12 view .LVU91
 450 0092 DDE90201 		ldrd	r0, [sp, #8]
 451 0096 FFF7FEFF 		bl	__aeabi_dadd
 452              	.LVL44:
 453 009a 0646     		mov	r6, r0
 454 009c 0F46     		mov	r7, r1
 455              	.LVL45:
 101:Core/Src/PID.c ****     
 456              		.loc 1 101 5 is_stmt 1 view .LVU92
 101:Core/Src/PID.c ****     
 457              		.loc 1 101 14 is_stmt 0 view .LVU93
 458 009e 0498     		ldr	r0, [sp, #16]	@ float
 459 00a0 FFF7FEFF 		bl	__aeabi_f2d
 460              	.LVL46:
 461 00a4 CDE90201 		strd	r0, [sp, #8]
 462 00a8 0598     		ldr	r0, [sp, #20]	@ float
 463 00aa FFF7FEFF 		bl	__aeabi_f2d
 464              	.LVL47:
 465 00ae CDE90001 		strd	r0, [sp]
 466 00b2 DDE90223 		ldrd	r2, [sp, #8]
 467 00b6 3046     		mov	r0, r6
 468 00b8 3946     		mov	r1, r7
 469 00ba FFF7FEFF 		bl	PID_Limit
ARM GAS  /tmp/cc9QEZ4P.s 			page 12


 470              	.LVL48:
 471 00be 0646     		mov	r6, r0
 472              	.LVL49:
 101:Core/Src/PID.c ****     
 473              		.loc 1 101 14 view .LVU94
 474 00c0 0F46     		mov	r7, r1
 475              	.LVL50:
 103:Core/Src/PID.c ****     output = PID_Limit(output, _OUTPUT_MAX, _OUTPUT_MIN);
 476              		.loc 1 103 5 is_stmt 1 view .LVU95
 103:Core/Src/PID.c ****     output = PID_Limit(output, _OUTPUT_MAX, _OUTPUT_MIN);
 477              		.loc 1 103 12 is_stmt 0 view .LVU96
 478 00c2 0246     		mov	r2, r0
 479 00c4 0B46     		mov	r3, r1
 480 00c6 5046     		mov	r0, r10
 481 00c8 5946     		mov	r1, fp
 482 00ca FFF7FEFF 		bl	__aeabi_dadd
 483              	.LVL51:
 104:Core/Src/PID.c ****     
 484              		.loc 1 104 5 is_stmt 1 view .LVU97
 104:Core/Src/PID.c ****     
 485              		.loc 1 104 14 is_stmt 0 view .LVU98
 486 00ce CDE90089 		strd	r8, [sp]
 487 00d2 DDE90623 		ldrd	r2, [sp, #24]
 488 00d6 FFF7FEFF 		bl	PID_Limit
 489              	.LVL52:
 104:Core/Src/PID.c ****     
 490              		.loc 1 104 14 view .LVU99
 491 00da 8146     		mov	r9, r0
 492 00dc 8846     		mov	r8, r1
 493              	.LVL53:
 106:Core/Src/PID.c ****     PID->previous_error = PID->error;
 494              		.loc 1 106 5 is_stmt 1 view .LVU100
 106:Core/Src/PID.c ****     PID->previous_error = PID->error;
 495              		.loc 1 106 48 is_stmt 0 view .LVU101
 496 00de 0022     		movs	r2, #0
 497 00e0 0023     		movs	r3, #0
 498 00e2 4846     		mov	r0, r9
 106:Core/Src/PID.c ****     PID->previous_error = PID->error;
 499              		.loc 1 106 48 view .LVU102
 500 00e4 4146     		mov	r1, r8
 106:Core/Src/PID.c ****     PID->previous_error = PID->error;
 501              		.loc 1 106 48 view .LVU103
 502 00e6 FFF7FEFF 		bl	__aeabi_dcmplt
 503              	.LVL54:
 106:Core/Src/PID.c ****     PID->previous_error = PID->error;
 504              		.loc 1 106 48 view .LVU104
 505 00ea 90B9     		cbnz	r0, .L41
 506              	.LVL55:
 507              	.L31:
 106:Core/Src/PID.c ****     PID->previous_error = PID->error;
 508              		.loc 1 106 23 discriminator 4 view .LVU105
 509 00ec 4A46     		mov	r2, r9
 510 00ee 4346     		mov	r3, r8
 511 00f0 C5E90823 		strd	r2, [r5, #32]
 107:Core/Src/PID.c ****     PID->last_i = i_term;
 512              		.loc 1 107 5 is_stmt 1 discriminator 4 view .LVU106
 107:Core/Src/PID.c ****     PID->last_i = i_term;
ARM GAS  /tmp/cc9QEZ4P.s 			page 13


 513              		.loc 1 107 30 is_stmt 0 discriminator 4 view .LVU107
 514 00f4 D4E90623 		ldrd	r2, [r4, #24]
 107:Core/Src/PID.c ****     PID->last_i = i_term;
 515              		.loc 1 107 25 discriminator 4 view .LVU108
 516 00f8 C4E90823 		strd	r2, [r4, #32]
 108:Core/Src/PID.c **** }
 517              		.loc 1 108 5 is_stmt 1 discriminator 4 view .LVU109
 108:Core/Src/PID.c **** }
 518              		.loc 1 108 17 is_stmt 0 discriminator 4 view .LVU110
 519 00fc C4E90C67 		strd	r6, [r4, #48]
 109:Core/Src/PID.c **** 
 520              		.loc 1 109 1 discriminator 4 view .LVU111
 521 0100 09B0     		add	sp, sp, #36
 522              	.LCFI7:
 523              		.cfi_remember_state
 524              		.cfi_def_cfa_offset 36
 525              		@ sp needed
 526 0102 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 527              	.LVL56:
 528              	.L38:
 529              	.LCFI8:
 530              		.cfi_restore_state
  88:Core/Src/PID.c ****     }
 531              		.loc 1 88 20 view .LVU112
 532 0106 0023     		movs	r3, #0
 533 0108 0493     		str	r3, [sp, #16]	@ float
 534 010a 9DE7     		b	.L27
 535              	.LVL57:
 536              	.L39:
  97:Core/Src/PID.c ****     }
 537              		.loc 1 97 20 view .LVU113
 538 010c 0023     		movs	r3, #0
 539 010e 0593     		str	r3, [sp, #20]	@ float
 540 0110 ABE7     		b	.L29
 541              	.LVL58:
 542              	.L41:
 106:Core/Src/PID.c ****     PID->previous_error = PID->error;
 543              		.loc 1 106 48 discriminator 1 view .LVU114
 544 0112 08F10048 		add	r8, r8, #-2147483648
 545              	.LVL59:
 106:Core/Src/PID.c ****     PID->previous_error = PID->error;
 546              		.loc 1 106 48 discriminator 1 view .LVU115
 547 0116 E9E7     		b	.L31
 548              		.cfi_endproc
 549              	.LFE69:
 551              		.global	__aeabi_dcmpeq
 552              		.global	__aeabi_d2uiz
 553              		.section	.text.PID_SetDuty,"ax",%progbits
 554              		.align	1
 555              		.global	PID_SetDuty
 556              		.syntax unified
 557              		.thumb
 558              		.thumb_func
 559              		.fpu softvfp
 561              	PID_SetDuty:
 562              	.LVL60:
 563              	.LFB71:
ARM GAS  /tmp/cc9QEZ4P.s 			page 14


 127:Core/Src/PID.c **** 
 128:Core/Src/PID.c **** 
 129:Core/Src/PID.c **** 
 130:Core/Src/PID.c **** // PID_SetDuty(&(htimx->CCRx->CNT), MOTOR_TypeDef *motor)
 131:Core/Src/PID.c **** void PID_SetDuty(MOTOR_TypeDef *motor)
 132:Core/Src/PID.c **** {
 564              		.loc 1 132 1 is_stmt 1 view -0
 565              		.cfi_startproc
 566              		@ args = 0, pretend = 0, frame = 0
 567              		@ frame_needed = 0, uses_anonymous_args = 0
 568              		.loc 1 132 1 is_stmt 0 view .LVU117
 569 0000 10B5     		push	{r4, lr}
 570              	.LCFI9:
 571              		.cfi_def_cfa_offset 8
 572              		.cfi_offset 4, -8
 573              		.cfi_offset 14, -4
 574 0002 0446     		mov	r4, r0
 133:Core/Src/PID.c ****     if (motor->dir == 1)
 575              		.loc 1 133 5 is_stmt 1 view .LVU118
 576              		.loc 1 133 14 is_stmt 0 view .LVU119
 577 0004 90F82830 		ldrb	r3, [r0, #40]	@ zero_extendqisi2
 578              		.loc 1 133 8 view .LVU120
 579 0008 012B     		cmp	r3, #1
 580 000a 19D0     		beq	.L51
 134:Core/Src/PID.c ****     {
 135:Core/Src/PID.c ****         HAL_GPIO_WritePin(motor->GPIO, motor->DIR1_PIN, 0);
 136:Core/Src/PID.c ****         HAL_GPIO_WritePin(motor->GPIO, motor->DIR2_PIN, 1);
 137:Core/Src/PID.c ****     }
 138:Core/Src/PID.c ****     else 
 139:Core/Src/PID.c ****     {
 140:Core/Src/PID.c ****         HAL_GPIO_WritePin(motor->GPIO, motor->DIR1_PIN, 1);
 581              		.loc 1 140 9 is_stmt 1 view .LVU121
 582 000c 0122     		movs	r2, #1
 583 000e 418D     		ldrh	r1, [r0, #42]
 584 0010 406B     		ldr	r0, [r0, #52]
 585              	.LVL61:
 586              		.loc 1 140 9 is_stmt 0 view .LVU122
 587 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 588              	.LVL62:
 141:Core/Src/PID.c ****         HAL_GPIO_WritePin(motor->GPIO, motor->DIR2_PIN, 0);  
 589              		.loc 1 141 9 is_stmt 1 view .LVU123
 590 0016 0022     		movs	r2, #0
 591 0018 A18D     		ldrh	r1, [r4, #44]
 592 001a 606B     		ldr	r0, [r4, #52]
 593 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 594              	.LVL63:
 595              	.L44:
 142:Core/Src/PID.c ****     }
 143:Core/Src/PID.c ****     if (motor->set_speed != 0)
 596              		.loc 1 143 5 view .LVU124
 597              		.loc 1 143 8 is_stmt 0 view .LVU125
 598 0020 0022     		movs	r2, #0
 599 0022 0023     		movs	r3, #0
 600 0024 D4E90201 		ldrd	r0, [r4, #8]
 601 0028 FFF7FEFF 		bl	__aeabi_dcmpeq
 602              	.LVL64:
 603 002c 98B9     		cbnz	r0, .L49
ARM GAS  /tmp/cc9QEZ4P.s 			page 15


 144:Core/Src/PID.c ****     {
 145:Core/Src/PID.c ****         *(motor->PWM_ADDR) = round(motor->pwm_output);      
 604              		.loc 1 145 9 is_stmt 1 view .LVU126
 605              		.loc 1 145 30 is_stmt 0 view .LVU127
 606 002e D4E90801 		ldrd	r0, [r4, #32]
 607 0032 FFF7FEFF 		bl	round
 608              	.LVL65:
 609              		.loc 1 145 16 view .LVU128
 610 0036 A46B     		ldr	r4, [r4, #56]
 611              	.LVL66:
 612              		.loc 1 145 28 view .LVU129
 613 0038 FFF7FEFF 		bl	__aeabi_d2uiz
 614              	.LVL67:
 615 003c 2060     		str	r0, [r4]
 616              	.L42:
 146:Core/Src/PID.c ****     }
 147:Core/Src/PID.c ****     else
 148:Core/Src/PID.c ****     {
 149:Core/Src/PID.c ****         // HAL_GPIO_WritePin(motor->GPIO, motor->DIR1_PIN, 0);
 150:Core/Src/PID.c ****         // HAL_GPIO_WritePin(motor->GPIO, motor->DIR2_PIN, 0);
 151:Core/Src/PID.c ****         *(motor->PWM_ADDR) = 0;
 152:Core/Src/PID.c ****     }
 153:Core/Src/PID.c **** }
 617              		.loc 1 153 1 view .LVU130
 618 003e 10BD     		pop	{r4, pc}
 619              	.LVL68:
 620              	.L51:
 135:Core/Src/PID.c ****         HAL_GPIO_WritePin(motor->GPIO, motor->DIR2_PIN, 1);
 621              		.loc 1 135 9 is_stmt 1 view .LVU131
 622 0040 0022     		movs	r2, #0
 623 0042 418D     		ldrh	r1, [r0, #42]
 624 0044 406B     		ldr	r0, [r0, #52]
 625              	.LVL69:
 135:Core/Src/PID.c ****         HAL_GPIO_WritePin(motor->GPIO, motor->DIR2_PIN, 1);
 626              		.loc 1 135 9 is_stmt 0 view .LVU132
 627 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 628              	.LVL70:
 136:Core/Src/PID.c ****     }
 629              		.loc 1 136 9 is_stmt 1 view .LVU133
 630 004a 0122     		movs	r2, #1
 631 004c A18D     		ldrh	r1, [r4, #44]
 632 004e 606B     		ldr	r0, [r4, #52]
 633 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 634              	.LVL71:
 635 0054 E4E7     		b	.L44
 636              	.L49:
 151:Core/Src/PID.c ****     }
 637              		.loc 1 151 9 view .LVU134
 151:Core/Src/PID.c ****     }
 638              		.loc 1 151 16 is_stmt 0 view .LVU135
 639 0056 A36B     		ldr	r3, [r4, #56]
 151:Core/Src/PID.c ****     }
 640              		.loc 1 151 28 view .LVU136
 641 0058 0022     		movs	r2, #0
 642 005a 1A60     		str	r2, [r3]
 643              		.loc 1 153 1 view .LVU137
 644 005c EFE7     		b	.L42
ARM GAS  /tmp/cc9QEZ4P.s 			page 16


 645              		.cfi_endproc
 646              	.LFE71:
 648              		.section	.text.PID_SetTunings,"ax",%progbits
 649              		.align	1
 650              		.global	PID_SetTunings
 651              		.syntax unified
 652              		.thumb
 653              		.thumb_func
 654              		.fpu softvfp
 656              	PID_SetTunings:
 657              	.LVL72:
 658              	.LFB72:
 154:Core/Src/PID.c **** 
 155:Core/Src/PID.c **** 
 156:Core/Src/PID.c **** void PID_SetTunings(PID_TypeDef *pPID_Params, double setKp, double setKi, double setKd)
 157:Core/Src/PID.c **** {
 659              		.loc 1 157 1 is_stmt 1 view -0
 660              		.cfi_startproc
 661              		@ args = 16, pretend = 0, frame = 0
 662              		@ frame_needed = 0, uses_anonymous_args = 0
 663              		@ link register save eliminated.
 158:Core/Src/PID.c ****     pPID_Params->Kp = setKp;
 664              		.loc 1 158 5 view .LVU139
 665              		.loc 1 158 21 is_stmt 0 view .LVU140
 666 0000 C0E90023 		strd	r2, [r0]
 159:Core/Src/PID.c ****     pPID_Params->Ki = setKi;
 667              		.loc 1 159 5 is_stmt 1 view .LVU141
 668              		.loc 1 159 21 is_stmt 0 view .LVU142
 669 0004 DDE90023 		ldrd	r2, [sp]
 670              	.LVL73:
 671              		.loc 1 159 21 view .LVU143
 672 0008 C0E90423 		strd	r2, [r0, #16]
 160:Core/Src/PID.c ****     pPID_Params->Kd = setKd;
 673              		.loc 1 160 5 is_stmt 1 view .LVU144
 674              		.loc 1 160 21 is_stmt 0 view .LVU145
 675 000c DDE90223 		ldrd	r2, [sp, #8]
 676 0010 C0E90223 		strd	r2, [r0, #8]
 161:Core/Src/PID.c **** }
 677              		.loc 1 161 1 view .LVU146
 678 0014 7047     		bx	lr
 679              		.cfi_endproc
 680              	.LFE72:
 682              		.section	.text.PID_MotorInit,"ax",%progbits
 683              		.align	1
 684              		.global	PID_MotorInit
 685              		.syntax unified
 686              		.thumb
 687              		.thumb_func
 688              		.fpu softvfp
 690              	PID_MotorInit:
 691              	.LVL74:
 692              	.LFB73:
 162:Core/Src/PID.c **** 
 163:Core/Src/PID.c **** 
 164:Core/Src/PID.c **** // Init GPIOs and PID params that relevant to motor.
 165:Core/Src/PID.c **** void PID_MotorInit( MOTOR_TypeDef *motor,               // Motor str address
 166:Core/Src/PID.c ****                     PID_TypeDef *pPID_Params,           // PID str address
ARM GAS  /tmp/cc9QEZ4P.s 			page 17


 167:Core/Src/PID.c ****                     GPIO_TypeDef* PORT,                 // GPIO PORT for direction control
 168:Core/Src/PID.c ****                     uint16_t PIN1,                      // GPIO PINS for direction control
 169:Core/Src/PID.c ****                     uint16_t PIN2,                      // GPIO PINS for direction control
 170:Core/Src/PID.c ****                     double max_output,                  // Max Output of PWM
 171:Core/Src/PID.c ****                     double min_output,                  // Min Input of PWM
 172:Core/Src/PID.c ****                     volatile uint32_t * TIM_ENC_ADDR,   // TIMER interfacing encoder's counter regi
 173:Core/Src/PID.c ****                     volatile uint32_t * TIM_PWM_ADDR,   // TIMER Capture and Compare Register addre
 174:Core/Src/PID.c ****                     double* pSet_Params)                // Set PID parameters array
 175:Core/Src/PID.c **** {
 693              		.loc 1 175 1 is_stmt 1 view -0
 694              		.cfi_startproc
 695              		@ args = 36, pretend = 0, frame = 0
 696              		@ frame_needed = 0, uses_anonymous_args = 0
 697              		.loc 1 175 1 is_stmt 0 view .LVU148
 698 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 699              	.LCFI10:
 700              		.cfi_def_cfa_offset 24
 701              		.cfi_offset 4, -24
 702              		.cfi_offset 5, -20
 703              		.cfi_offset 6, -16
 704              		.cfi_offset 7, -12
 705              		.cfi_offset 8, -8
 706              		.cfi_offset 14, -4
 707 0004 84B0     		sub	sp, sp, #16
 708              	.LCFI11:
 709              		.cfi_def_cfa_offset 40
 710 0006 0446     		mov	r4, r0
 711 0008 0D46     		mov	r5, r1
 712 000a 9046     		mov	r8, r2
 713 000c 1F46     		mov	r7, r3
 714 000e 129E     		ldr	r6, [sp, #72]
 176:Core/Src/PID.c **** 
 177:Core/Src/PID.c ****     #ifndef __GPIO_H__
 178:Core/Src/PID.c ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 179:Core/Src/PID.c **** 
 180:Core/Src/PID.c ****     GPIO_InitStruct.Pin = PIN1 | PIN2;
 181:Core/Src/PID.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 182:Core/Src/PID.c ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 183:Core/Src/PID.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
 184:Core/Src/PID.c ****     HAL_GPIO_Init(PORT, &GPIO_InitStruct);
 185:Core/Src/PID.c ****     #endif
 186:Core/Src/PID.c **** 
 187:Core/Src/PID.c ****     memset(pPID_Params , 0, sizeof(PID_TypeDef) );
 715              		.loc 1 187 5 is_stmt 1 view .LVU149
 716 0010 5022     		movs	r2, #80
 717              	.LVL75:
 718              		.loc 1 187 5 is_stmt 0 view .LVU150
 719 0012 0021     		movs	r1, #0
 720              	.LVL76:
 721              		.loc 1 187 5 view .LVU151
 722 0014 2846     		mov	r0, r5
 723              	.LVL77:
 724              		.loc 1 187 5 view .LVU152
 725 0016 FFF7FEFF 		bl	memset
 726              	.LVL78:
 188:Core/Src/PID.c **** 
 189:Core/Src/PID.c ****     motor->pPID_params = pPID_Params;
ARM GAS  /tmp/cc9QEZ4P.s 			page 18


 727              		.loc 1 189 5 is_stmt 1 view .LVU153
 728              		.loc 1 189 24 is_stmt 0 view .LVU154
 729 001a 2563     		str	r5, [r4, #48]
 190:Core/Src/PID.c ****     motor->GPIO = PORT;
 730              		.loc 1 190 5 is_stmt 1 view .LVU155
 731              		.loc 1 190 17 is_stmt 0 view .LVU156
 732 001c C4F83480 		str	r8, [r4, #52]
 191:Core/Src/PID.c ****     motor->DIR1_PIN = PIN1;
 733              		.loc 1 191 5 is_stmt 1 view .LVU157
 734              		.loc 1 191 21 is_stmt 0 view .LVU158
 735 0020 6785     		strh	r7, [r4, #42]	@ movhi
 192:Core/Src/PID.c ****     motor->DIR2_PIN = PIN2;
 736              		.loc 1 192 5 is_stmt 1 view .LVU159
 737              		.loc 1 192 21 is_stmt 0 view .LVU160
 738 0022 BDF82830 		ldrh	r3, [sp, #40]
 739 0026 A385     		strh	r3, [r4, #44]	@ movhi
 193:Core/Src/PID.c **** 
 194:Core/Src/PID.c ****     motor->dir = 1;
 740              		.loc 1 194 5 is_stmt 1 view .LVU161
 741              		.loc 1 194 16 is_stmt 0 view .LVU162
 742 0028 0123     		movs	r3, #1
 743 002a 84F82830 		strb	r3, [r4, #40]
 195:Core/Src/PID.c **** 
 196:Core/Src/PID.c ****     motor->ENC_ADDR = TIM_ENC_ADDR;
 744              		.loc 1 196 5 is_stmt 1 view .LVU163
 745              		.loc 1 196 21 is_stmt 0 view .LVU164
 746 002e 109B     		ldr	r3, [sp, #64]
 747 0030 E363     		str	r3, [r4, #60]
 197:Core/Src/PID.c ****     motor->PWM_ADDR = TIM_PWM_ADDR;
 748              		.loc 1 197 5 is_stmt 1 view .LVU165
 749              		.loc 1 197 21 is_stmt 0 view .LVU166
 750 0032 119B     		ldr	r3, [sp, #68]
 751 0034 A363     		str	r3, [r4, #56]
 198:Core/Src/PID.c **** 
 199:Core/Src/PID.c ****     pPID_Params->OUTPUT_MAX = max_output;
 752              		.loc 1 199 5 is_stmt 1 view .LVU167
 753              		.loc 1 199 29 is_stmt 0 view .LVU168
 754 0036 DDE90C23 		ldrd	r2, [sp, #48]
 755 003a C5E91023 		strd	r2, [r5, #64]
 200:Core/Src/PID.c ****     pPID_Params->OUTPUT_MIN = min_output;
 756              		.loc 1 200 5 is_stmt 1 view .LVU169
 757              		.loc 1 200 29 is_stmt 0 view .LVU170
 758 003e DDE90E23 		ldrd	r2, [sp, #56]
 759 0042 C5E91223 		strd	r2, [r5, #72]
 201:Core/Src/PID.c **** 
 202:Core/Src/PID.c ****     PID_SetTunings(pPID_Params, pSet_Params[0] , pSet_Params[1], pSet_Params[2]);
 760              		.loc 1 202 5 is_stmt 1 view .LVU171
 761 0046 D6E90423 		ldrd	r2, [r6, #16]
 762 004a CDE90223 		strd	r2, [sp, #8]
 763 004e D6E90223 		ldrd	r2, [r6, #8]
 764 0052 CDE90023 		strd	r2, [sp]
 765 0056 D6E90023 		ldrd	r2, [r6]
 766 005a 2846     		mov	r0, r5
 767 005c FFF7FEFF 		bl	PID_SetTunings
 768              	.LVL79:
 203:Core/Src/PID.c **** }
 769              		.loc 1 203 1 is_stmt 0 view .LVU172
ARM GAS  /tmp/cc9QEZ4P.s 			page 19


 770 0060 04B0     		add	sp, sp, #16
 771              	.LCFI12:
 772              		.cfi_def_cfa_offset 24
 773              		@ sp needed
 774 0062 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 775              		.loc 1 203 1 view .LVU173
 776              		.cfi_endproc
 777              	.LFE73:
 779              		.section	.text.PID_FirstOrderFilter,"ax",%progbits
 780              		.align	1
 781              		.global	PID_FirstOrderFilter
 782              		.syntax unified
 783              		.thumb
 784              		.thumb_func
 785              		.fpu softvfp
 787              	PID_FirstOrderFilter:
 788              	.LVL80:
 789              	.LFB74:
 204:Core/Src/PID.c **** 
 205:Core/Src/PID.c **** 
 206:Core/Src/PID.c **** // Note: Nothing
 207:Core/Src/PID.c **** double PID_FirstOrderFilter(double raw_sig, double last_filtered_sig, double a)
 208:Core/Src/PID.c **** {
 790              		.loc 1 208 1 is_stmt 1 view -0
 791              		.cfi_startproc
 792              		@ args = 8, pretend = 0, frame = 0
 793              		@ frame_needed = 0, uses_anonymous_args = 0
 794              		.loc 1 208 1 is_stmt 0 view .LVU175
 795 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 796              	.LCFI13:
 797              		.cfi_def_cfa_offset 32
 798              		.cfi_offset 3, -32
 799              		.cfi_offset 4, -28
 800              		.cfi_offset 5, -24
 801              		.cfi_offset 6, -20
 802              		.cfi_offset 7, -16
 803              		.cfi_offset 8, -12
 804              		.cfi_offset 9, -8
 805              		.cfi_offset 14, -4
 806 0004 0646     		mov	r6, r0
 807 0006 0F46     		mov	r7, r1
 808 0008 DDE90889 		ldrd	r8, [sp, #32]
 209:Core/Src/PID.c ****     return  (a * last_filtered_sig +  (1-a) * raw_sig);
 809              		.loc 1 209 5 is_stmt 1 view .LVU176
 810              		.loc 1 209 16 is_stmt 0 view .LVU177
 811 000c 4046     		mov	r0, r8
 812              	.LVL81:
 813              		.loc 1 209 16 view .LVU178
 814 000e 4946     		mov	r1, r9
 815 0010 FFF7FEFF 		bl	__aeabi_dmul
 816              	.LVL82:
 817              		.loc 1 209 16 view .LVU179
 818 0014 0446     		mov	r4, r0
 819 0016 0D46     		mov	r5, r1
 820              		.loc 1 209 41 view .LVU180
 821 0018 4246     		mov	r2, r8
 822 001a 4B46     		mov	r3, r9
ARM GAS  /tmp/cc9QEZ4P.s 			page 20


 823 001c 0020     		movs	r0, #0
 824 001e 0749     		ldr	r1, .L57
 825 0020 FFF7FEFF 		bl	__aeabi_dsub
 826              	.LVL83:
 827              		.loc 1 209 45 view .LVU181
 828 0024 3246     		mov	r2, r6
 829 0026 3B46     		mov	r3, r7
 830 0028 FFF7FEFF 		bl	__aeabi_dmul
 831              	.LVL84:
 832 002c 0246     		mov	r2, r0
 833 002e 0B46     		mov	r3, r1
 834              		.loc 1 209 36 view .LVU182
 835 0030 2046     		mov	r0, r4
 836 0032 2946     		mov	r1, r5
 837 0034 FFF7FEFF 		bl	__aeabi_dadd
 838              	.LVL85:
 210:Core/Src/PID.c **** }
 839              		.loc 1 210 1 view .LVU183
 840 0038 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 841              	.LVL86:
 842              	.L58:
 843              		.loc 1 210 1 view .LVU184
 844              		.align	2
 845              	.L57:
 846 003c 0000F03F 		.word	1072693248
 847              		.cfi_endproc
 848              	.LFE74:
 850              		.global	__aeabi_ui2d
 851              		.section	.text.PID_PreProcess,"ax",%progbits
 852              		.align	1
 853              		.global	PID_PreProcess
 854              		.syntax unified
 855              		.thumb
 856              		.thumb_func
 857              		.fpu softvfp
 859              	PID_PreProcess:
 860              	.LVL87:
 861              	.LFB75:
 211:Core/Src/PID.c **** 
 212:Core/Src/PID.c **** 
 213:Core/Src/PID.c **** // Do sampling and computing speed in RPM and PID Error
 214:Core/Src/PID.c **** void PID_PreProcess(MOTOR_TypeDef *motor, double _set_speed)
 215:Core/Src/PID.c **** {
 862              		.loc 1 215 1 is_stmt 1 view -0
 863              		.cfi_startproc
 864              		@ args = 0, pretend = 0, frame = 0
 865              		@ frame_needed = 0, uses_anonymous_args = 0
 866              		.loc 1 215 1 is_stmt 0 view .LVU186
 867 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 868              	.LCFI14:
 869              		.cfi_def_cfa_offset 36
 870              		.cfi_offset 4, -36
 871              		.cfi_offset 5, -32
 872              		.cfi_offset 6, -28
 873              		.cfi_offset 7, -24
 874              		.cfi_offset 8, -20
 875              		.cfi_offset 9, -16
ARM GAS  /tmp/cc9QEZ4P.s 			page 21


 876              		.cfi_offset 10, -12
 877              		.cfi_offset 11, -8
 878              		.cfi_offset 14, -4
 879 0004 83B0     		sub	sp, sp, #12
 880              	.LCFI15:
 881              		.cfi_def_cfa_offset 48
 882 0006 0446     		mov	r4, r0
 883 0008 9046     		mov	r8, r2
 884 000a 9946     		mov	r9, r3
 216:Core/Src/PID.c **** 
 217:Core/Src/PID.c ****     // Sampling: get ticks at the same time with getting encoder pos
 218:Core/Src/PID.c ****     uint32_t enc_cnt = *(motor->ENC_ADDR); // Similar to enc_cnt = TIMx->CNT
 885              		.loc 1 218 5 is_stmt 1 view .LVU187
 886              		.loc 1 218 31 is_stmt 0 view .LVU188
 887 000c C36B     		ldr	r3, [r0, #60]
 888              		.loc 1 218 14 view .LVU189
 889 000e D3F800B0 		ldr	fp, [r3]
 890              	.LVL88:
 219:Core/Src/PID.c ****     uint32_t tick = HAL_GetTick();
 891              		.loc 1 219 5 is_stmt 1 view .LVU190
 892              		.loc 1 219 21 is_stmt 0 view .LVU191
 893 0012 FFF7FEFF 		bl	HAL_GetTick
 894              	.LVL89:
 895              		.loc 1 219 21 view .LVU192
 896 0016 0546     		mov	r5, r0
 897              	.LVL90:
 220:Core/Src/PID.c ****     // End of sampling
 221:Core/Src/PID.c **** 
 222:Core/Src/PID.c ****     uint32_t d_tick = tick - motor->last_tick; // Calc the derivative of time
 898              		.loc 1 222 5 is_stmt 1 view .LVU193
 899              		.loc 1 222 35 is_stmt 0 view .LVU194
 900 0018 A369     		ldr	r3, [r4, #24]
 901              	.LVL91:
 223:Core/Src/PID.c ****     if (d_tick <= 0) d_tick = 10;
 902              		.loc 1 223 5 is_stmt 1 view .LVU195
 903              		.loc 1 223 8 is_stmt 0 view .LVU196
 904 001a B0EB030A 		subs	r10, r0, r3
 905              	.LVL92:
 906              		.loc 1 223 8 view .LVU197
 907 001e 01D1     		bne	.L60
 908              		.loc 1 223 29 view .LVU198
 909 0020 4FF00A0A 		mov	r10, #10
 910              	.LVL93:
 911              	.L60:
 224:Core/Src/PID.c **** 
 225:Core/Src/PID.c ****     uint32_t last_enc_cnt = motor->last_enc_cnt;
 912              		.loc 1 225 5 is_stmt 1 view .LVU199
 913              		.loc 1 225 14 is_stmt 0 view .LVU200
 914 0024 E069     		ldr	r0, [r4, #28]
 915              	.LVL94:
 226:Core/Src/PID.c **** 
 227:Core/Src/PID.c ****     double d_measure = (enc_cnt>last_enc_cnt) ? (enc_cnt-last_enc_cnt) : (last_enc_cnt-enc_cnt);
 916              		.loc 1 227 5 is_stmt 1 view .LVU201
 917              		.loc 1 227 12 is_stmt 0 view .LVU202
 918 0026 8345     		cmp	fp, r0
 919 0028 2CD9     		bls	.L61
 920              		.loc 1 227 12 discriminator 1 view .LVU203
ARM GAS  /tmp/cc9QEZ4P.s 			page 22


 921 002a ABEB0000 		sub	r0, fp, r0
 922              	.LVL95:
 923              		.loc 1 227 12 discriminator 1 view .LVU204
 924 002e FFF7FEFF 		bl	__aeabi_ui2d
 925              	.LVL96:
 926              		.loc 1 227 12 discriminator 1 view .LVU205
 927 0032 0646     		mov	r6, r0
 928 0034 0F46     		mov	r7, r1
 929              	.L62:
 930              	.LVL97:
 228:Core/Src/PID.c ****     // Handle overflow or underflow of encoder interfacing timer
 229:Core/Src/PID.c ****     if (d_measure > 50) d_measure = motor->measure;
 931              		.loc 1 229 5 is_stmt 1 discriminator 4 view .LVU206
 932              		.loc 1 229 8 is_stmt 0 discriminator 4 view .LVU207
 933 0036 0022     		movs	r2, #0
 934 0038 164B     		ldr	r3, .L68
 935 003a 3046     		mov	r0, r6
 936 003c 3946     		mov	r1, r7
 937 003e FFF7FEFF 		bl	__aeabi_dcmpgt
 938              	.LVL98:
 939 0042 08B1     		cbz	r0, .L63
 940              		.loc 1 229 25 is_stmt 1 discriminator 1 view .LVU208
 941              		.loc 1 229 35 is_stmt 0 discriminator 1 view .LVU209
 942 0044 D4E90467 		ldrd	r6, [r4, #16]
 943              	.LVL99:
 944              	.L63:
 230:Core/Src/PID.c ****     // Filter the measurement
 231:Core/Src/PID.c ****     d_measure  = PID_FirstOrderFilter(d_measure, motor->measure, _1ST_FILTER_ALPHA);
 945              		.loc 1 231 5 is_stmt 1 view .LVU210
 946              		.loc 1 231 18 is_stmt 0 view .LVU211
 947 0048 0022     		movs	r2, #0
 948 004a 134B     		ldr	r3, .L68+4
 949 004c CDE90023 		strd	r2, [sp]
 950 0050 D4E90423 		ldrd	r2, [r4, #16]
 951 0054 3046     		mov	r0, r6
 952 0056 3946     		mov	r1, r7
 953 0058 FFF7FEFF 		bl	PID_FirstOrderFilter
 954              	.LVL100:
 232:Core/Src/PID.c **** 
 233:Core/Src/PID.c ****     motor->measure = d_measure;
 955              		.loc 1 233 5 is_stmt 1 view .LVU212
 956              		.loc 1 233 20 is_stmt 0 view .LVU213
 957 005c C4E90401 		strd	r0, [r4, #16]
 234:Core/Src/PID.c **** 
 235:Core/Src/PID.c ****     PID_ComputeSpeedRPM( motor, d_tick );
 958              		.loc 1 235 5 is_stmt 1 view .LVU214
 959 0060 5146     		mov	r1, r10
 960 0062 2046     		mov	r0, r4
 961              	.LVL101:
 962              		.loc 1 235 5 is_stmt 0 view .LVU215
 963 0064 FFF7FEFF 		bl	PID_ComputeSpeedRPM
 964              	.LVL102:
 236:Core/Src/PID.c ****     PID_SetSpeedRPM( motor , _set_speed );
 965              		.loc 1 236 5 is_stmt 1 view .LVU216
 966 0068 4246     		mov	r2, r8
 967 006a 4B46     		mov	r3, r9
 968 006c 2046     		mov	r0, r4
ARM GAS  /tmp/cc9QEZ4P.s 			page 23


 969 006e FFF7FEFF 		bl	PID_SetSpeedRPM
 970              	.LVL103:
 237:Core/Src/PID.c ****     PID_ComputeError( motor );
 971              		.loc 1 237 5 view .LVU217
 972 0072 2046     		mov	r0, r4
 973 0074 FFF7FEFF 		bl	PID_ComputeError
 974              	.LVL104:
 238:Core/Src/PID.c ****  
 239:Core/Src/PID.c ****     motor->last_tick = tick;
 975              		.loc 1 239 5 view .LVU218
 976              		.loc 1 239 22 is_stmt 0 view .LVU219
 977 0078 A561     		str	r5, [r4, #24]
 240:Core/Src/PID.c ****     motor->last_enc_cnt = enc_cnt;
 978              		.loc 1 240 5 is_stmt 1 view .LVU220
 979              		.loc 1 240 25 is_stmt 0 view .LVU221
 980 007a C4F81CB0 		str	fp, [r4, #28]
 241:Core/Src/PID.c **** 
 242:Core/Src/PID.c **** }
 981              		.loc 1 242 1 view .LVU222
 982 007e 03B0     		add	sp, sp, #12
 983              	.LCFI16:
 984              		.cfi_remember_state
 985              		.cfi_def_cfa_offset 36
 986              		@ sp needed
 987 0080 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 988              	.LVL105:
 989              	.L61:
 990              	.LCFI17:
 991              		.cfi_restore_state
 227:Core/Src/PID.c ****     // Handle overflow or underflow of encoder interfacing timer
 992              		.loc 1 227 12 discriminator 2 view .LVU223
 993 0084 A0EB0B00 		sub	r0, r0, fp
 994              	.LVL106:
 227:Core/Src/PID.c ****     // Handle overflow or underflow of encoder interfacing timer
 995              		.loc 1 227 12 discriminator 2 view .LVU224
 996 0088 FFF7FEFF 		bl	__aeabi_ui2d
 997              	.LVL107:
 227:Core/Src/PID.c ****     // Handle overflow or underflow of encoder interfacing timer
 998              		.loc 1 227 12 discriminator 2 view .LVU225
 999 008c 0646     		mov	r6, r0
 1000 008e 0F46     		mov	r7, r1
 1001 0090 D1E7     		b	.L62
 1002              	.L69:
 1003 0092 00BF     		.align	2
 1004              	.L68:
 1005 0094 00004940 		.word	1078525952
 1006 0098 0000E03F 		.word	1071644672
 1007              		.cfi_endproc
 1008              	.LFE75:
 1010              		.text
 1011              	.Letext0:
 1012              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 1013              		.file 3 "Drivers/CMSIS/Include/core_cm3.h"
 1014              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1015              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 1016              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 1017              		.file 7 "Core/Inc/PID.h"
ARM GAS  /tmp/cc9QEZ4P.s 			page 24


 1018              		.file 8 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 1019              		.file 9 "/usr/include/newlib/sys/_types.h"
 1020              		.file 10 "/usr/include/newlib/sys/reent.h"
 1021              		.file 11 "/usr/include/newlib/sys/lock.h"
 1022              		.file 12 "/usr/include/newlib/math.h"
 1023              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 1024              		.file 14 "<built-in>"
ARM GAS  /tmp/cc9QEZ4P.s 			page 25


DEFINED SYMBOLS
                            *ABS*:0000000000000000 PID.c
     /tmp/cc9QEZ4P.s:21     .text.PID_ComputeSpeedRPM:0000000000000000 $t
     /tmp/cc9QEZ4P.s:29     .text.PID_ComputeSpeedRPM:0000000000000000 PID_ComputeSpeedRPM
     /tmp/cc9QEZ4P.s:82     .text.PID_ComputeSpeedRPM:0000000000000038 $d
     /tmp/cc9QEZ4P.s:90     .text.PID_SetSpeedRPM:0000000000000000 $t
     /tmp/cc9QEZ4P.s:97     .text.PID_SetSpeedRPM:0000000000000000 PID_SetSpeedRPM
     /tmp/cc9QEZ4P.s:157    .text.PID_SetSpeedMPS:0000000000000000 $t
     /tmp/cc9QEZ4P.s:164    .text.PID_SetSpeedMPS:0000000000000000 PID_SetSpeedMPS
     /tmp/cc9QEZ4P.s:205    .text.PID_SetSpeedMPS:0000000000000028 $d
     /tmp/cc9QEZ4P.s:213    .text.PID_ComputeError:0000000000000000 $t
     /tmp/cc9QEZ4P.s:220    .text.PID_ComputeError:0000000000000000 PID_ComputeError
     /tmp/cc9QEZ4P.s:255    .text.PID_Limit:0000000000000000 $t
     /tmp/cc9QEZ4P.s:262    .text.PID_Limit:0000000000000000 PID_Limit
     /tmp/cc9QEZ4P.s:319    .text.PID_ComputeOutput:0000000000000000 $t
     /tmp/cc9QEZ4P.s:326    .text.PID_ComputeOutput:0000000000000000 PID_ComputeOutput
     /tmp/cc9QEZ4P.s:554    .text.PID_SetDuty:0000000000000000 $t
     /tmp/cc9QEZ4P.s:561    .text.PID_SetDuty:0000000000000000 PID_SetDuty
     /tmp/cc9QEZ4P.s:649    .text.PID_SetTunings:0000000000000000 $t
     /tmp/cc9QEZ4P.s:656    .text.PID_SetTunings:0000000000000000 PID_SetTunings
     /tmp/cc9QEZ4P.s:683    .text.PID_MotorInit:0000000000000000 $t
     /tmp/cc9QEZ4P.s:690    .text.PID_MotorInit:0000000000000000 PID_MotorInit
     /tmp/cc9QEZ4P.s:780    .text.PID_FirstOrderFilter:0000000000000000 $t
     /tmp/cc9QEZ4P.s:787    .text.PID_FirstOrderFilter:0000000000000000 PID_FirstOrderFilter
     /tmp/cc9QEZ4P.s:846    .text.PID_FirstOrderFilter:000000000000003c $d
     /tmp/cc9QEZ4P.s:852    .text.PID_PreProcess:0000000000000000 $t
     /tmp/cc9QEZ4P.s:859    .text.PID_PreProcess:0000000000000000 PID_PreProcess
     /tmp/cc9QEZ4P.s:1005   .text.PID_PreProcess:0000000000000094 $d

UNDEFINED SYMBOLS
__aeabi_ui2f
__aeabi_fmul
__aeabi_f2d
__aeabi_ddiv
__aeabi_dmul
__aeabi_dcmpge
__aeabi_i2d
__aeabi_dsub
__aeabi_dcmpgt
__aeabi_dcmplt
__aeabi_d2f
__aeabi_dadd
__aeabi_dcmpeq
__aeabi_d2uiz
HAL_GPIO_WritePin
round
memset
__aeabi_ui2d
HAL_GetTick
